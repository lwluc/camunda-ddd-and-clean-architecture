<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:zeebe="http://camunda.org/schema/zeebe/1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_1cojsk2" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.0.0" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.0.0">
  <bpmn:collaboration id="Collaboration_0w35pbw">
    <bpmn:participant id="Participant_16ksm4o" name="Loan Agreement example" processRef="Loan_Agreement" />
    <bpmn:participant id="Participant_1xcghje" name="Third-party-legacy System" />
    <bpmn:participant id="Participant_10a5hxf" name="Third-party-legacy System" />
    <bpmn:messageFlow id="Flow_1a4toos" sourceRef="ApproveLoanAgreementServiceTask" targetRef="Participant_1xcghje" />
    <bpmn:messageFlow id="Flow_1sr6eeg" sourceRef="RejectLoanAgreementServiceTask" targetRef="Participant_10a5hxf" />
  </bpmn:collaboration>
  <bpmn:process id="Loan_Agreement" name="Loan Agreement" isExecutable="true">
    <bpmn:startEvent id="LoanAgreementReceivedStartEvent" name="loan agreement recived">
      <bpmn:outgoing>Flow_1a7dewt</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1c5v0o8" messageRef="Message_0o9ohqs" />
    </bpmn:startEvent>
    <bpmn:businessRuleTask id="ApproveAgreementRuleTask" name="Approve agreement">
      <bpmn:extensionElements>
        <zeebe:calledDecision decisionId="approvement-check" resultVariable="approved" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1a7dewt</bpmn:incoming>
      <bpmn:outgoing>Flow_0b8w6r4</bpmn:outgoing>
    </bpmn:businessRuleTask>
    <bpmn:exclusiveGateway id="Gateway_1lbkm1m" name="Is agreement approved?">
      <bpmn:incoming>Flow_0b8w6r4</bpmn:incoming>
      <bpmn:outgoing>Flow_11ck3o3</bpmn:outgoing>
      <bpmn:outgoing>Flow_1x7d6jb</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:serviceTask id="ApproveLoanAgreementServiceTask" name="Approve loan agreement">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="approve-loan-agreement" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_11ck3o3</bpmn:incoming>
      <bpmn:outgoing>Flow_1m68173</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="RejectLoanAgreementServiceTask" name="Rejection loan agreement">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="reject-loan-agreement" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1x7d6jb</bpmn:incoming>
      <bpmn:outgoing>Flow_0u06ha5</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:endEvent id="LoanAgreementNotApprovedEndEvent" name="loan agreement not approved">
      <bpmn:incoming>Flow_0u06ha5</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_1a7dewt" sourceRef="LoanAgreementReceivedStartEvent" targetRef="ApproveAgreementRuleTask" />
    <bpmn:sequenceFlow id="Flow_0b8w6r4" sourceRef="ApproveAgreementRuleTask" targetRef="Gateway_1lbkm1m" />
    <bpmn:sequenceFlow id="Flow_11ck3o3" name="yes" sourceRef="Gateway_1lbkm1m" targetRef="ApproveLoanAgreementServiceTask">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=approved=true</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1m68173" sourceRef="ApproveLoanAgreementServiceTask" targetRef="SendCrossSellingEvent" />
    <bpmn:sequenceFlow id="Flow_1x7d6jb" name="no" sourceRef="Gateway_1lbkm1m" targetRef="RejectLoanAgreementServiceTask">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=approved=false</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0u06ha5" sourceRef="RejectLoanAgreementServiceTask" targetRef="LoanAgreementNotApprovedEndEvent" />
    <bpmn:intermediateThrowEvent id="SendCrossSellingEvent" name="Send cross-selling recommendaiton">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="send-cross-selling-recommendation" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1m68173</bpmn:incoming>
      <bpmn:outgoing>Flow_04mwr0b</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1x5iaae" />
    </bpmn:intermediateThrowEvent>
    <bpmn:endEvent id="LoanAgreementApprovedEndEvent" name="loan agreement approved">
      <bpmn:incoming>Flow_04mwr0b</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_04mwr0b" sourceRef="SendCrossSellingEvent" targetRef="LoanAgreementApprovedEndEvent" />
  </bpmn:process>
  <bpmn:message id="Message_0o9ohqs" name="loanAgreementReceivedMessage" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_0w35pbw">
      <bpmndi:BPMNShape id="Participant_16ksm4o_di" bpmnElement="Participant_16ksm4o" isHorizontal="true">
        <dc:Bounds x="160" y="170" width="860" height="270" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_04mwr0b_di" bpmnElement="Flow_04mwr0b">
        <di:waypoint x="838" y="250" />
        <di:waypoint x="936" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0u06ha5_di" bpmnElement="Flow_0u06ha5">
        <di:waypoint x="710" y="360" />
        <di:waypoint x="802" y="360" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1x7d6jb_di" bpmnElement="Flow_1x7d6jb">
        <di:waypoint x="500" y="275" />
        <di:waypoint x="500" y="360" />
        <di:waypoint x="610" y="360" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="509" y="315" width="13" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1m68173_di" bpmnElement="Flow_1m68173">
        <di:waypoint x="710" y="250" />
        <di:waypoint x="802" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_11ck3o3_di" bpmnElement="Flow_11ck3o3">
        <di:waypoint x="525" y="250" />
        <di:waypoint x="610" y="250" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="559" y="232" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0b8w6r4_di" bpmnElement="Flow_0b8w6r4">
        <di:waypoint x="420" y="250" />
        <di:waypoint x="475" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1a7dewt_di" bpmnElement="Flow_1a7dewt">
        <di:waypoint x="268" y="250" />
        <di:waypoint x="320" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Event_189g024_di" bpmnElement="LoanAgreementReceivedStartEvent">
        <dc:Bounds x="232" y="232" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="212" y="275" width="77" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_061t2y6_di" bpmnElement="ApproveAgreementRuleTask">
        <dc:Bounds x="320" y="210" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1lbkm1m_di" bpmnElement="Gateway_1lbkm1m" isMarkerVisible="true">
        <dc:Bounds x="475" y="225" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="468" y="186" width="65" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_12k9z5m_di" bpmnElement="ApproveLoanAgreementServiceTask">
        <dc:Bounds x="610" y="210" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1to38de_di" bpmnElement="RejectLoanAgreementServiceTask">
        <dc:Bounds x="610" y="320" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1e7aj39_di" bpmnElement="LoanAgreementNotApprovedEndEvent">
        <dc:Bounds x="802" y="342" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="782" y="385" width="77" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0b9mm01_di" bpmnElement="SendCrossSellingEvent">
        <dc:Bounds x="802" y="232" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="780" y="275" width="82" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0ya5h8m" bpmnElement="LoanAgreementApprovedEndEvent">
        <dc:Bounds x="936" y="232" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="916" y="275" width="77" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Participant_1mw44p0_di" bpmnElement="Participant_1xcghje" isHorizontal="true">
        <dc:Bounds x="510" y="80" width="300" height="60" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0elm7s8" bpmnElement="Participant_10a5hxf" isHorizontal="true">
        <dc:Bounds x="510" y="470" width="300" height="60" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1a4toos_di" bpmnElement="Flow_1a4toos">
        <di:waypoint x="660" y="210" />
        <di:waypoint x="660" y="140" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1sr6eeg_di" bpmnElement="Flow_1sr6eeg">
        <di:waypoint x="660" y="400" />
        <di:waypoint x="660" y="470" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
